# lancia

> ç½‘é¡µè½¬PDFæ¸²æŸ“æœåŠ¡ã€‚æä¾›æ”¶æ®ã€å‘ç¥¨ã€æŠ¥å‘Šæˆ–ä»»ä½•ç½‘é¡µå†…å®¹è½¬PDFçš„å¾®æœåŠ¡


**âš ï¸ è­¦å‘Š âš ï¸** *è¯·ä¸è¦å°†è¿™ä¸ªAPIæœåŠ¡å…¬å¼€ä¸äº’è”ç½‘,é™¤éä½ æ˜¯çŸ¥é“æ½œåœ¨çš„é£é™©.
å› ä¸ºå®ƒå…è®¸ç”¨æˆ·åœ¨æœåŠ¡å™¨ä¸Šçš„Chromeä¼šè¯ä¸­è¿è¡Œä»»ä½•JavaScriptä»£ç ,åæœè¯·è‡ªè¡Œè´Ÿè´£*


**â­ï¸ Features:**

* å°†ä»»ä½•URLæˆ–HTMLå†…å®¹è½¬æ¢ä¸ºPDFæ–‡ä»¶æˆ–å›¾åƒ(PNG/JPEG)
* *ä½¿ç”¨[Puppeteer](https://github.com/GoogleChrome/puppeteer)æ¸²æŸ“æ— å¤´Chromeã€‚PDFæ–‡ä»¶ä¸æ¡Œé¢Chromeç”Ÿæˆçš„æ–‡ä»¶ä¸€è‡´.
* åˆç†çš„é»˜è®¤å€¼ï¼Œå¤§éƒ¨åˆ†å‚æ•°éƒ½æ˜¯å¯é…ç½®çš„
* å•é¡µapp (SPA)æ”¯æŒã€‚åœ¨å‘ˆç°ä¹‹å‰ï¼Œç­‰å¾…æ‰€æœ‰ç½‘ç»œè¯·æ±‚å®Œæˆ
* Easy deployment to Heroku. We love Lambda but...Deploy to Heroku button.
* å‘ˆç°å»¶è¿ŸåŠ è½½çš„å…ƒç´  *(scrollPage é€‰é¡¹)*
* æ”¯æŒå¯é€‰çš„â€œX-Access-Tokeâ€èº«ä»½éªŒè¯*


* **é»˜è®¤æƒ…å†µä¸‹é¡µé¢çš„ `@media print` CSS è§„åˆ™å°†è¢«å¿½ç•¥**.å°†Chromeè®¾ç½®ä¸ºæ¨¡æ‹Ÿ
  `@media screen`
  ï¼Œä½¿é»˜è®¤çš„pdfæ–‡ä»¶çœ‹èµ·æ¥æ›´åƒå®é™…ç«™ç‚¹ã€‚è¦è·å¾—æ›´æ¥è¿‘æ¡Œé¢Chromeçš„ç»“æœï¼Œè¯·æ·»åŠ `&emulateScreenMedia=false`æŸ¥è¯¢å‚æ•°ã€‚æ›´å¤šä¿¡æ¯è¯·è®¿é—®[Puppeteer API docs](https://github.com/GoogleChrome/puppeteer/blob/master/docs/api.md#pagepdfoptions).
  APIæ–‡æ¡£ã€‚ 
  
* Chromeå¯åŠ¨æ—¶å¸¦æœ‰`--no-sandbox--disable-setuid-sandbox`æ ‡å¿—ï¼Œå¼€å¯debianæ”¯æŒ.

* å¦‚æœæœåŠ¡å™¨æ²¡æœ‰è¶³å¤Ÿçš„å†…å­˜ï¼Œè¶…å¤§é¡µé¢åŠ è½½å¯èƒ½ä¼šå¯¼è‡´Chromeå´©æºƒ.



**ğŸ” ä¸ºä»€ä¹ˆåšè¿™ä¸ªæœåŠ¡?**

å½“æ‚¨éœ€è¦è‡ªåŠ¨ç”ŸæˆPDFæ–‡ä»¶æ—¶ï¼Œæ­¤å¾®æœåŠ¡éå¸¸æœ‰ç”¨,ä¸ç®¡å‡ºäºä»€ä¹ˆåŸå› ã€‚è¿™äº›æ–‡ä»¶å¯ä»¥å‘ˆç°ä¸ºæ”¶æ®ï¼Œå‘¨æŠ¥ï¼Œå‘ç¥¨ï¼Œæˆ–ä»»ä½•å†…å®¹ã€‚

PDFå¯ä»¥ä»¥å¤šç§æ–¹å¼ç”Ÿæˆï¼Œä½†å…¶ä¸­éš¾ç‚¹ä¹‹ä¸€æ˜¯è½¬æ¢HTML+CSS,å¤§éƒ¨åˆ†å·¥å…·æ— æ³•å‘ˆç°æœŸæœ›çš„ç»“æœï¼Œè¿™ä¸ªæœåŠ¡å°±æ˜¯å¼¥è¡¥ä¸è¶³æ‰åšçš„ã€‚

## è°ƒç ”ç»“æœ
|è°ƒç ”å¯¹è±¡ | ä¼˜ç‚¹ | ç¼ºç‚¹| åˆ†é¡µ | å›¾ç‰‡| è¡¨æ ¼|é“¾æ¥ |ä¸­æ–‡ |ç‰¹æ®Šå­—ç¬¦ |æ ·å¼ |
|----|----|----|----|----|----|----|----|----|----|
|jsPDF|æ•´ä¸ªè¿‡ç¨‹åœ¨å®¢æˆ·ç«¯æ‰§è¡Œ(ä¸éœ€è¦æœåŠ¡å™¨å‚ä¸)ï¼Œè°ƒç”¨ç®€å•|ç”Ÿæˆçš„pdfä¸ºå›¾ç‰‡å½¢å¼ï¼Œä¸”å†…å®¹å¤±çœŸ|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|ä¸æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|åŠæ”¯æŒhrefä¸æ”¯æŒ)|
|iText|1ã€åŠŸèƒ½åŸºæœ¬å¯ä»¥å®ç°ï¼Œæ¯”è¾ƒçµæ´»2ã€ç”Ÿæˆpdfè´¨é‡è¾ƒé«˜|1ã€å¯¹htmlæ ‡ç­¾ä¸¥ï¼›æ ¼ï¼Œå°‘ä¸€ä¸ªç»“æŸæ ‡ç­¾å°±ä¼šæŠ¥é”™ï¼›2ã€åç«¯å®ç°å¤æ‚ï¼ŒæœåŠ¡å™¨éœ€è¦å®‰è£…å­—ä½“ï¼›3ã€å›¾ç‰‡æ¸²æŸ“æ¯”è¾ƒå¤æ‚(æš‚æ—¶è¿˜æ²¡è§£å†³)|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|åŠæ”¯æŒhrefä¸æ”¯æŒ)|
|wkhtmltopdf|1ã€è°ƒç”¨æ–¹å¼ç®€å•(åªéœ€æ‰§è¡Œä¸€è¡Œè„šæœ¬)ï¼›2ã€ç”Ÿæˆpdfè´¨é‡è¾ƒé«˜|1ã€æœåŠ¡å™¨éœ€è¦å®‰è£…wkhtmltopdfç¯å¢ƒï¼›2ã€æ ¹æ®ç½‘å€ç”Ÿæˆpdfï¼Œå¯¹äºæœ‰æƒé™æ§åˆ¶çš„é¡µé¢éœ€è¦åœ¨æ‹¦æˆªå™¨è¿›è¡Œå¤„ç†|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|æ”¯æŒ|åŠæ”¯æŒhrefä¸æ”¯æŒ)|


## ç¤ºä¾‹

*æç¤º: æ ¹æ®ç½‘ç«™å†…å®¹çš„å¤§å°ï¼Œå¯è®¾ç½®å“åº”çš„è¶…æ—¶æ—¶é—´,å¿…è¦æ—¶å¯è®¾ç½®ä¸ºï¼š30ç§’.*

**æ¸²æŸ“ baidu.com**

http://xxx:7003/router/rest?url=http://baidu.com

**å°†baidu.comæ¸²æŸ“ä¸ºPNGå›¾åƒ**

http://xxx:7003/router/rest?url=http://baidu.com&output=screenshot

**ä½¿ç”¨é»˜è®¤çš„@media printè€Œä¸æ˜¯@media screen.**

http://xxx:7003/router/rest?url=http://baidu.com&emulateScreenMedia=false

**ä½¿ç”¨scrollPage=trueï¼Œæ˜¾ç¤ºæ‰€æœ‰å»¶è¿ŸåŠ è½½çš„å…ƒç´ ã€‚ä¸å®Œç¾ï¼Œä½†æ€»æ¯”æ²¡æœ‰å¥½.**

http://xxx:7003/router/rest?url=http://baidu.com&scrollPage=true

**åªæ¸²æŸ“ç¬¬ä¸€é¡µ**

http://xxx:7003/router/rest?url=http://baidu.com&pdf.pageRanges=1

**æ¨ªå‘æ¸²æŸ“A5å¤§å°çš„PDF.**

http://xxx:7003/router/rest?url=http://baidu.com&pdf.format=A5&pdf.landscape=true

**åœ¨PDFä¸­æ·»åŠ 2cmçš„é¡µè¾¹è·.**

http://xxx:7003/router/rest?url=http://baidu.com&pdf.margin.right=2cm&pdf.margin.bottom=2cm&pdf.margin.left=2cm

**æ¸²æŸ“è¶…æ—¶æ—¶é—´ä¸º1000æ¯«ç§’.**

http://xxx:7003/router/rest?url=http://baidu.com&waitFor=1000



**ä¸‹è½½å¸¦æœ‰æŒ‡å®šé™„ä»¶åç§°çš„PDF**

http://xxx:7003/router/rest?url=http://baidu.com&attachmentName=google.pdf

**ç­‰å¾…åŒ¹é…`input`å…ƒç´ .**

http://xxx:7003/router/rest?url=http://baidu.com&waitFor=input


### æŠ€æœ¯æ ˆ

* Node 8+ (async, await), éœ€è¦ES7æ”¯æŒ
* [Koajs](https://github.com/koajs/koa) å¾ˆå¥½çš„æ¡†æ¶
* [Puppeteer](https://github.com/GoogleChrome/puppeteer) è°·æ­Œå®˜æ–¹ Chrome
  nodeåº“